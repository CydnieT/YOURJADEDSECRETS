<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Your Jaded Secrets · Murphy Made</title>

  <style>
    :root{
      --bg:#070707;
      --panel:rgba(0,0,0,.62);
      --ink:#e4dcc3;
      --muted:#c8bb9a;
      --gold:#b89c59;
      --line:#2a241a;
      --radius:18px;
      --max:1120px;
      --shadow: 0 18px 60px rgba(0,0,0,.55);
      --ember: rgba(170, 30, 60, .22);
      --crimson: rgba(168,24,58,.88);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; scroll-behavior:smooth; }
    body{
      margin:0;
      background:
        radial-gradient(1200px 800px at 20% 0%, rgba(184,156,89,.10), transparent 55%),
        radial-gradient(900px 600px at 85% 10%, rgba(228,220,195,.07), transparent 55%),
        radial-gradient(900px 700px at 40% 120%, var(--ember), transparent 55%),
        var(--bg);
      color:var(--ink);
      font-family:"Playfair Display", serif;
      line-height:1.6;
      overflow-x:hidden;
    }
    a{ color:inherit; text-decoration:none; }
    .wrap{ max-width:var(--max); margin:0 auto; padding:26px 18px 70px; }

    header{
      display:flex; align-items:flex-start; justify-content:space-between; gap:16px;
      padding:10px 0 18px; border-bottom:1px solid var(--line);
      position:sticky; top:0; z-index:50;
      background:linear-gradient(180deg, rgba(7,7,7,.92), rgba(7,7,7,.74));
      backdrop-filter: blur(8px);
    }
    .brand{ letter-spacing:.18em; font-weight:700; font-size:18px; text-transform:uppercase; }
    .subbrand{ display:block; margin-top:6px; font-size:12px; letter-spacing:.12em; color:var(--muted); text-transform:uppercase; opacity:.9; }

    nav{
      display:flex; gap:14px; flex-wrap:wrap; justify-content:flex-end; padding-top:2px;
      font-size:12px; letter-spacing:.12em; text-transform:uppercase; color:var(--muted);
      align-items:center;
    }
    nav a{ border-bottom:1px solid transparent; padding-bottom:2px; }
    nav a:hover{ border-bottom-color:var(--gold); color:var(--ink); }

    .pill{
      font-size:11px; letter-spacing:.12em; text-transform:uppercase;
      border:1px solid var(--line); color:var(--muted);
      padding:6px 10px; border-radius:999px; user-select:none; white-space:nowrap;
      background: transparent; cursor:pointer;
    }
    .pill strong{ color:var(--ink); }

    .hero{
      margin-top:18px; min-height:640px;
      border:1px solid var(--line); border-radius:var(--radius); overflow:hidden;
      box-shadow: var(--shadow); position:relative;
      background:
        linear-gradient(180deg, rgba(0,0,0,.20), rgba(0,0,0,.85)),
        url("images/priestess-collage.png");
      background-size:cover; background-position:center;
    }
    .hero::before{
      content:""; position:absolute; inset:-40px;
      background:
        radial-gradient(700px 500px at 30% 30%, rgba(184,156,89,.20), transparent 64%),
        radial-gradient(520px 380px at 78% 46%, rgba(168,24,58,.18), transparent 70%);
      filter: blur(6px);
      animation: drift 10s ease-in-out infinite alternate;
      pointer-events:none;
    }
    .hero::after{
      content:""; position:absolute; inset:0;
      background:
        radial-gradient(800px 520px at 50% 70%, rgba(168,24,58,.12), transparent 65%),
        linear-gradient(180deg, rgba(0,0,0,.08), rgba(0,0,0,.86));
      animation: ember 3.1s ease-in-out infinite;
      pointer-events:none;
    }
    @keyframes drift{
      0%{ transform: translate3d(0,0,0) scale(1); opacity:.85; }
      100%{ transform: translate3d(14px,-10px,0) scale(1.03); opacity:1; }
    }
    @keyframes ember{ 0%,100%{ opacity:.92; } 50%{ opacity:1; } }

    .hero-inner{
      position:relative; z-index:2; height:100%;
      display:flex; align-items:flex-end;
      padding:28px 22px 22px;
    }
    .hero-card{
      max-width:920px; width:100%;
      background:var(--panel);
      border:1px solid rgba(184,156,89,.85);
      border-radius:var(--radius);
      padding:20px 18px 16px;
      backdrop-filter: blur(6px);
    }
    .kicker{ font-size:12px; letter-spacing:.18em; text-transform:uppercase; color:var(--muted); margin:0 0 10px; }
    h1{ margin:0 0 10px; font-size:44px; line-height:1.06; letter-spacing:.02em; }
    .lead{ margin:0 0 14px; font-size:15px; color:var(--ink); opacity:.92; }

    .cta-row{ display:flex; gap:12px; flex-wrap:wrap; margin-top:12px; }
    .btn{
      appearance:none; border:1px solid var(--gold); background:transparent; color:var(--ink);
      padding:11px 16px; border-radius:12px; font-size:12px;
      letter-spacing:.14em; text-transform:uppercase; cursor:pointer; display:inline-block;
    }
    .btn:hover{ background:var(--gold); color:#0b0b0b; }
    .btn.secondary{ border-color:#6a5a35; color:var(--muted); }
    .btn.secondary:hover{ background:#19140d; color:var(--ink); }
    .btn.danger{ border-color: rgba(168,24,58,.85); color:#f1d7dd; }
    .btn.danger:hover{ background: rgba(168,24,58,.88); border-color: rgba(168,24,58,.95); color:#0b0b0b; }
    .btn.crimson{ border-color: rgba(168,24,58,.75); box-shadow:0 0 0 rgba(168,24,58,0); animation:pulse 2.4s ease-in-out infinite; }
    .btn.crimson:hover{ background: var(--crimson); color:#0b0b0b; }
    @keyframes pulse{ 0%,100%{ box-shadow:0 0 0 rgba(168,24,58,0);} 50%{ box-shadow:0 0 22px rgba(168,24,58,.22);} }

    .grid{ display:grid; grid-template-columns: 1.1fr .9fr; gap:16px; margin-top:16px; }
    @media (max-width: 920px){
      .grid{ grid-template-columns:1fr; }
      h1{ font-size:40px; }
      header{ position:static; backdrop-filter:none; }
    }

    .panel{
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:18px;
      background:rgba(255,255,255,.02);
      box-shadow: 0 10px 28px rgba(0,0,0,.35);
    }
    .panel h2{ margin:0 0 8px; font-size:16px; letter-spacing:.16em; text-transform:uppercase; }
    .panel p{ margin:0 0 10px; color:var(--muted); font-size:14px; }
    .fine{ font-size:12px; color:#9b9078; letter-spacing:.06em; text-transform:none; margin-top:8px; }

    /* The “visual for this section” */
    .feature{
      border-radius:var(--radius);
      border:1px solid var(--line);
      min-height:380px;
      position:relative;
      overflow:hidden;
      box-shadow: var(--shadow);
      background-size:cover;
      background-position:center;
      background-image:
        linear-gradient(180deg, rgba(0,0,0,.12), rgba(0,0,0,.88)),
        url("images/section-visual.png"),
        url("images/high-priestess.jpg");
    }
    .feature::after{
      content:"";
      position:absolute; inset:0;
      background: radial-gradient(620px 420px at 50% 45%, rgba(184,156,89,.18), transparent 66%);
      animation: glow 2.7s ease-in-out infinite;
      pointer-events:none;
    }
    @keyframes glow{ 0%,100%{ opacity:.72;} 50%{ opacity:1;} }
    .feature .label{
      position:absolute; bottom:12px; left:12px; right:12px;
      z-index:1;
      background:rgba(0,0,0,.55);
      border:1px solid rgba(184,156,89,.85);
      border-radius:12px;
      padding:10px 12px;
      font-size:12px;
      letter-spacing:.12em;
      text-transform:uppercase;
      color:var(--ink);
    }

    .rooms{
      margin-top:14px;
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
    }
    @media (max-width: 920px){ .rooms{ grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 540px){ .rooms{ grid-template-columns: 1fr; } }

    .room{
      border:1px solid var(--line);
      border-radius:var(--radius);
      overflow:hidden;
      background:#0f0f0f;
      position:relative;
      min-height:170px;
      background-size:cover;
      background-position:center;
      cursor:pointer;
      box-shadow: 0 14px 40px rgba(0,0,0,.45);
      outline: none;
      width:100%;
      text-align:left;
    }
    .room::after{
      content:"";
      position:absolute; inset:0;
      background:linear-gradient(180deg, rgba(0,0,0,.05), rgba(0,0,0,.66));
      opacity:.90;
      transition:opacity .2s ease;
    }
    .room:hover::after{ opacity:.76; }
    .room .meta{
      position:absolute; left:12px; right:12px; bottom:10px;
      z-index:1; display:flex; justify-content:space-between; gap:10px; align-items:flex-end;
    }
    .room .title{
      font-size:12px; letter-spacing:.14em; text-transform:uppercase; color:var(--ink); opacity:.98;
    }
    .badge{
      font-size:11px; letter-spacing:.14em; text-transform:uppercase;
      border:1px solid rgba(184,156,89,.55);
      padding:6px 8px; border-radius:999px;
      background:rgba(0,0,0,.35); color:var(--muted); white-space:nowrap;
    }
    .badge.red{ border-color: rgba(168,24,58,.65); color:#f1d7dd; }

    footer{
      margin-top:26px; padding-top:18px;
      border-top:1px solid var(--line);
      color:#9b9078;
      font-size:12px;
      letter-spacing:.10em;
      text-transform:uppercase;
      text-align:center;
    }

    /* DOB Gate Modal */
    .modal{
      position:fixed; inset:0;
      display:none; align-items:center; justify-content:center;
      padding:22px;
      background:rgba(0,0,0,.86);
      z-index:9999;
    }
    .modal.open{ display:flex; }
    .modal-card{
      width:min(760px, 96vw);
      border:1px solid rgba(184,156,89,.85);
      border-radius:20px;
      background:rgba(10,10,10,.92);
      box-shadow: var(--shadow);
      padding:18px 18px 16px;
    }
    .modal-card h3{
      margin:0 0 8px;
      font-size:18px;
      letter-spacing:.14em;
      text-transform:uppercase;
    }
    .modal-card p{ margin:0 0 10px; color:var(--muted); font-size:14px; }
    .field{ margin-top:12px; display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
    .field label{ font-size:12px; letter-spacing:.12em; text-transform:uppercase; color:var(--muted); }
    input[type="date"]{
      flex: 1 1 220px;
      appearance:none;
      border:1px solid rgba(184,156,89,.55);
      background: rgba(0,0,0,.35);
      color: var(--ink);
      padding:12px 12px;
      border-radius:14px;
      font-family: inherit;
      font-size:14px;
      outline:none;
    }
    input[type="date"]:focus{ border-color: rgba(184,156,89,.95); box-shadow: 0 0 0 3px rgba(184,156,89,.12); }
    .modal-actions{ display:flex; gap:12px; flex-wrap:wrap; margin-top:14px; }
    .modal-actions .btn{ flex: 1 1 190px; text-align:center; }
    .error-note{
      margin-top:10px;
      padding:10px 12px;
      border:1px solid rgba(168,24,58,.45);
      border-radius:14px;
      background: rgba(168,24,58,.10);
      color:#f1d7dd;
      font-size:12px;
      letter-spacing:.04em;
      display:none;
      white-space:pre-wrap;
    }

    /* Cinematic veil + step forward for Initiation */
    .veil{
      position:fixed; inset:0;
      background: rgba(0,0,0,0);
      opacity:0;
      pointer-events:none;
      z-index:99999;
      transition: opacity .55s ease, background .55s ease;
    }
    .veil.open{
      opacity:1;
      background: rgba(0,0,0,.62);
      pointer-events:auto;
    }
    .veil-glow{
      position:absolute; inset:-20%;
      background:
        radial-gradient(520px 320px at 50% 65%, rgba(184,156,89,.28), transparent 70%),
        radial-gradient(720px 420px at 55% 60%, rgba(168,24,58,.18), transparent 75%);
      filter: blur(10px);
      opacity:0;
      transform: scale(1.02);
      transition: opacity .55s ease, transform .55s ease;
    }
    .veil.open .veil-glow{ opacity:1; transform: scale(1.06); }
    .veil-fog{
      position:absolute; inset:-30%;
      background:
        radial-gradient(800px 520px at 35% 35%, rgba(255,255,255,.08), transparent 65%),
        radial-gradient(700px 480px at 70% 55%, rgba(255,255,255,.06), transparent 65%),
        radial-gradient(900px 640px at 45% 80%, rgba(168,24,58,.10), transparent 70%);
      filter: blur(18px);
      opacity:0;
      transform: translate3d(0,12px,0) scale(1.02);
      transition: opacity .55s ease, transform .55s ease;
    }
    .veil.open .veil-fog{ opacity:1; transform: translate3d(0,0,0) scale(1.06); }
    body.going-forward{ animation: forwardStep .65s ease forwards; }
    @keyframes forwardStep{
      0%{ transform: translateY(0) scale(1); filter:none; }
      100%{ transform: translateY(-6px) scale(1.015); filter: brightness(.95); }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div>
        <div class="brand">Your Jaded Secrets</div>
        <span class="subbrand">Private wing · Murphy Made</span>
      </div>

      <nav aria-label="Primary">
        <a href="#threshold">Threshold</a>
        <a href="#manifesto">Manifesto</a>
        <a href="#rooms">Rooms</a>
        <a href="https://cydniet.github.io/THE-MIDNIGHT-GARDEN-US/index.html" target="_blank" rel="noopener noreferrer">Midnight Garden</a>
        <button class="pill" id="verifyBtn" type="button" title="Verify age via birthday to unlock doors.">
          Age: <strong id="agePillText">Not verified</strong>
        </button>
      </nav>
    </header>

    <!-- Threshold -->
    <section class="hero" id="threshold" aria-label="Threshold">
      <div class="hero-inner">
        <div class="hero-card">
          <p class="kicker">If you’re here, you were meant to be.</p>
          <h1>You don’t need permission.</h1>
          <p class="lead">
            Dangerous soft. High Priestess energy. Luxurious menace.
            Sexy, not scary. Powerful, not performative.
          </p>

          <div class="cta-row">
            <button class="btn crimson" type="button" id="initiationBtn">Initiation</button>
            <button class="btn secondary" type="button" data-jump="#rooms">Open the Rooms</button>
            <a class="btn secondary"
               href="mailto:yourjadedsecrets@gmail.com?subject=YJS%20Entry%20Request&body=Name:%0AWhy%20I%20found%20this:%0AWhat%20I%20want%20to%20build:%0A"
               target="_blank" rel="noopener noreferrer">Request Entry</a>
          </div>

          <p class="fine">New doors appear without announcement.</p>
        </div>
      </div>
    </section>

    <!-- Manifesto + Visual -->
    <section class="grid" id="manifesto" aria-label="Manifesto + Visual">
      <div class="panel">
        <h2>Manifesto</h2>
        <p><strong>I am the creator of my reality.</strong> I do not negotiate with limits.</p>
        <p>I move with softness that doesn’t ask. I keep my luxury private until it’s irreversible.</p>
        <p>This space holds drafts, drops, rituals, and future physical goods. The point is not to be liked. The point is to be inevitable.</p>

        <div class="cta-row">
          <button class="btn" type="button" id="initiationBtn2">Continue the Path</button>
          <button class="btn secondary" type="button" data-jump="#rooms">Rooms</button>
        </div>

        <p class="fine">18+ to enter. Some doors (events/products) require 21+.</p>
      </div>

      <div class="feature" aria-label="Section Visual">
        <div class="label">High Priestess: soft power, sharp standard</div>
      </div>
    </section>

    <!-- Rooms -->
    <section class="panel" id="rooms" style="margin-top:16px;" aria-label="Rooms">
      <h2>Rooms</h2>
      <p>Tap a door. No birthday = no entry.</p>

      <div class="rooms">
        <button class="room" type="button" data-door="initiation.html" data-min="18"
          style="background-image:url('images/priestess-collage.png');">
          <div class="meta"><div class="title">Initiation</div><div class="badge">18+</div></div>
        </button>

        <button class="room" type="button" data-door="inner-altar.html" data-min="18"
          style="background-image:url('images/inner_altar.png');">
          <div class="meta"><div class="title">Inner Altar</div><div class="badge">18+</div></div>
        </button>

        <button class="room" type="button" data-door="inner-chamber.html" data-min="18"
          style="background-image:url('images/priestess-collage.png');">
          <div class="meta"><div class="title">Inner Chamber</div><div class="badge">18+</div></div>
        </button>

        <button class="room" type="button" data-door="atelier.html" data-min="18"
          style="background-image:url('images/high-priestess.jpg');">
          <div class="meta"><div class="title">The Atelier</div><div class="badge">18+</div></div>
        </button>

        <button class="room" type="button" data-door="oracle-mirror.html" data-min="18"
          style="background-image:url('images/high-priestess.jpg');">
          <div class="meta"><div class="title">Oracle Mirror</div><div class="badge">18+</div></div>
        </button>

        <button class="room" type="button" data-door="gatekeeper.html" data-min="21"
          style="background-image:url('images/priestess-collage.png');">
          <div class="meta"><div class="title">Gatekeeper</div><div class="badge red">21+</div></div>
        </button>

        <button class="room" type="button" data-door="vault.html" data-min="21"
          style="background-image:url('images/high-priestess.jpg');">
          <div class="meta"><div class="title">The Vault</div><div class="badge red">21+</div></div>
        </button>
      </div>

      <p class="fine">Gallery later, like you said. This page stays clean and functional.</p>
    </section>

    <footer>
      © Your Jaded Secrets · Murphy Made
      <div class="fine">Quiet power. Loud results.</div>
    </footer>
  </div>

  <!-- DOB Gate -->
  <div class="modal" id="dobGate" role="dialog" aria-modal="true" aria-labelledby="dobTitle">
    <div class="modal-card">
      <h3 id="dobTitle">Birthday Verification</h3>
      <p>Enter your birthday to unlock doors. No birthday, no entry.</p>

      <div class="field">
        <label for="dobInput">Date of birth</label>
        <input id="dobInput" type="date" autocomplete="bday" />
      </div>

      <div class="modal-actions">
        <button class="btn" id="verifySubmit" type="button">Verify</button>
        <button class="btn secondary" id="verifyClear" type="button">Clear</button>
        <button class="btn danger" id="verifyLeave" type="button">Leave</button>
      </div>

      <div class="error-note" id="dobError"></div>
      <div class="fine">We don’t store your birthday, only whether you’re 18+ or 21+ on this device.</div>
    </div>
  </div>

  <!-- Cinematic veil -->
  <div class="veil" id="veil" aria-hidden="true">
    <div class="veil-glow"></div>
    <div class="veil-fog"></div>
  </div>

  <script>
    // No DOB stored, only flags.
    const KEY_18 = "yjs_verified_18"; // "1"
    const KEY_21 = "yjs_verified_21"; // "1"
    const KEY_TS = "yjs_verified_ts";
    const PENDING = "yjs_pending_target";

    const dobGate = document.getElementById("dobGate");
    const dobInput = document.getElementById("dobInput");
    const dobError = document.getElementById("dobError");
    const agePillText = document.getElementById("agePillText");
    const verifyBtn = document.getElementById("verifyBtn");
    const veil = document.getElementById("veil");

    function is18(){ return localStorage.getItem(KEY_18) === "1"; }
    function is21(){ return localStorage.getItem(KEY_21) === "1"; }

    function updatePill(){
      if(is21()) agePillText.textContent = "21+";
      else if(is18()) agePillText.textContent = "18+";
      else agePillText.textContent = "Not verified";
    }

    function openGate(msg){
      if(msg){
        dobError.style.display = "block";
        dobError.textContent = msg;
      }else{
        dobError.style.display = "none";
        dobError.textContent = "";
      }
      dobGate.classList.add("open");
      setTimeout(() => dobInput?.focus(), 60);
    }
    function closeGate(){ dobGate.classList.remove("open"); }

    function clearVerified(){
      localStorage.removeItem(KEY_18);
      localStorage.removeItem(KEY_21);
      localStorage.removeItem(KEY_TS);
      localStorage.removeItem(PENDING);
      updatePill();
    }

    function computeAgeYears(dobStr){
      const ok = /^\d{4}-\d{2}-\d{2}$/.test(dobStr);
      if(!ok) return null;
      const [y, mo, d] = dobStr.split("-").map(n => parseInt(n,10));
      const dob = new Date(y, mo - 1, d);
      if(Number.isNaN(dob.getTime())) return null;
      const now = new Date();
      let age = now.getFullYear() - dob.getFullYear();
      const mDiff = now.getMonth() - dob.getMonth();
      if(mDiff < 0 || (mDiff === 0 && now.getDate() < dob.getDate())) age--;
      return age;
    }

    function setVerified(ageYears){
      localStorage.setItem(KEY_18, ageYears >= 18 ? "1" : "0");
      localStorage.setItem(KEY_21, ageYears >= 21 ? "1" : "0");
      localStorage.setItem(KEY_TS, String(Date.now()));
      updatePill();
    }

    function jumpTo(hash){
      const id = String(hash || "").replace("#","");
      const el = document.getElementById(id);
      if(el) el.scrollIntoView({ behavior:"smooth", block:"start" });
    }

    // A little safety: helps catch missing files in your repo.
    async function fileExists(url){
      try{
        const res = await fetch(url, { method:"GET", cache:"no-store" });
        return res.ok;
      }catch(e){
        return true; // if fetch blocked, don't block navigation
      }
    }

    // Cinematic veil + forward step, then navigate.
    async function cinematicGo(url){
      const ok = await fileExists(url);
      if(!ok){
        openGate(
          `That door is in the design, but the file is missing:\n\n${url}\n\nFix: upload it to the repo root with that exact name (case matters).`
        );
        return;
      }
      document.body.classList.add("going-forward");
      veil.classList.add("open");
      veil.setAttribute("aria-hidden","false");
      setTimeout(() => { window.location.href = url; }, 560);
    }

    function require18OrGate(pendingValue){
      if(!is18()){
        localStorage.setItem(PENDING, pendingValue);
        openGate();
        return false;
      }
      return true;
    }

    // Initiation (B): veil -> initiation.html
    async function startInitiation(){
      if(!require18OrGate("initiation.html")) return;
      await cinematicGo("initiation.html");
    }

    // Room navigation with min age
    document.querySelectorAll("[data-door]").forEach(btn => {
      btn.addEventListener("click", async () => {
        const door = (btn.getAttribute("data-door") || "").trim();
        const min = parseInt(btn.getAttribute("data-min") || "18", 10);

        if(!is18()){
          localStorage.setItem(PENDING, `door:${door}|${min}`);
          openGate();
          return;
        }
        if(min >= 21 && !is21()){
          localStorage.setItem(PENDING, `door:${door}|${min}`);
          openGate("That door is 21+. Enter your birthday to verify 21+ on this device.");
          return;
        }

        // Initiation gets the cinematic treatment too.
        if(door === "initiation.html") await cinematicGo(door);
        else window.location.href = door;
      });
    });

    // Jump buttons
    document.querySelectorAll("[data-jump]").forEach(btn => {
      btn.addEventListener("click", () => {
        const hash = btn.getAttribute("data-jump");
        if(require18OrGate(hash)) jumpTo(hash);
      });
    });

    // Initiation buttons
    document.getElementById("initiationBtn").addEventListener("click", startInitiation);
    document.getElementById("initiationBtn2").addEventListener("click", startInitiation);

    // Open gate manually
    verifyBtn?.addEventListener("click", () => openGate());

    // Verify submit
    document.getElementById("verifySubmit").addEventListener("click", async () => {
      const val = (dobInput.value || "").trim();
      const age = computeAgeYears(val);

      if(age === null) return openGate("Enter a valid birthday.");
      if(age < 0 || age > 120) return openGate("That birthday looks… fictional. Try again.");

      setVerified(age);

      if(age < 18){
        clearVerified();
        window.location.href = "https://cydniet.github.io/THE-MIDNIGHT-GARDEN-US/index.html";
        return;
      }

      closeGate();

      const pending = localStorage.getItem(PENDING);
      if(!pending) return;
      localStorage.removeItem(PENDING);

      if(pending === "initiation.html"){
        await cinematicGo("initiation.html");
        return;
      }

      if(pending.startsWith("door:")){
        const rest = pending.replace("door:","");
        const [door, minStr] = rest.split("|");
        const min = parseInt(minStr || "18", 10);
        if(min >= 21 && !is21()){
          openGate("That door is 21+. You’re verified 18+ on this device. Enter birthday again if you're 21+.");
          return;
        }
        if(door === "initiation.html") await cinematicGo(door);
        else window.location.href = door;
        return;
      }

      if(pending.startsWith("#")){
        jumpTo(pending);
      }
    });

    document.getElementById("verifyClear").addEventListener("click", () => {
      clearVerified();
      openGate("Verification cleared. Enter birthday again to unlock.");
    });

    document.getElementById("verifyLeave").addEventListener("click", () => {
      clearVerified();
      window.location.href = "https://cydniet.github.io/THE-MIDNIGHT-GARDEN-US/index.html";
    });

    document.addEventListener("keydown", (e) => {
      if(e.key === "Escape") closeGate();
    });

    updatePill();

    // Enforce verification at entry (no sneaking)
    if(!is18()) openGate();
  </script>
</body>
</html>
